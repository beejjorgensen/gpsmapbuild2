#!/bin/bash

SMOOTH_DIST=5
MAX_POINTS=1900

files=json/*.json

for f in $files; do
    name=$(basename "$f" .json)

    printf -- "-------------------------------------------------------\n"
    printf "Building %s\n" "$name"
    printf -- "-------------------------------------------------------\n"

    gpx_name=${name}.gpx
    track_name="$name"

    case "$name" in
        Oregon_North_Cascades) track_name="ONCR" ;;
    esac

    ./gjretrack.py -e $SMOOTH_DIST -m 1900 -j -v "$f" | ./gjtogpx.py - "$track_name" > "$gpx_name"
done
